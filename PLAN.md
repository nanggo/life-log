# 블로그 성능 개선 계획

## 📊 현재 상황 분석

### 주요 문제점

1. **태그 클릭 첫 반응 속도 느림**: 모든 MD 파일을 동기적으로 로드 및 파싱
2. **서버 사이드 필터링**: 매번 전체 데이터를 처리하여 성능 저하
3. **런타임 처리**: `prerender = false`로 인한 빌드 시점 최적화 부족

### 기술적 분석

- `src/lib/data/posts.js`: 모든 포스트를 즉시 로드 (`import.meta.glob`의 `eager: true`)
- 태그 필터링이 서버에서 매번 전체 배열 순회
- 포스트 메타데이터와 본문이 함께 로드되어 초기 로딩 부담

## 🚀 개선 전략

### 1단계: 메타데이터 분리 및 최적화

**목표**: 포스트 메타데이터를 본문과 분리하여 빠른 초기 로딩

#### 구현 계획

- [ ] 빌드 시점에 포스트 메타데이터만 추출하는 스크립트 작성
- [ ] 메타데이터를 JSON 파일로 정적 생성
- [ ] 태그별 포스트 인덱스 미리 계산
- [ ] 클라이언트에서 메타데이터 우선 로드

#### 예상 효과

- 초기 로딩 시간 50% 단축
- 태그 필터링 응답 시간 80% 개선

### 2단계: 클라이언트 사이드 필터링

**목표**: 태그 전환 시 즉시 반응하는 사용자 경험

#### 구현 계획

- [ ] 메타데이터를 클라이언트에서 캐싱
- [ ] 태그 필터링 로직을 클라이언트로 이전
- [ ] 브라우저 히스토리 API로 URL 상태 관리
- [ ] 로딩 상태 UI 추가

#### 예상 효과

- 태그 클릭 즉시 반응 (0.1초 이내)
- 서버 요청 횟수 감소

### 3단계: 지연 로딩 최적화

**목표**: 필요한 데이터만 필요한 시점에 로드

#### 구현 계획

- [ ] 포스트 본문 지연 로딩
- [ ] 이미지 lazy loading
- [ ] 무한 스크롤 또는 페이지네이션 최적화
- [ ] 사용자 행동 기반 프리페칭

### 4단계: 번들 최적화

**목표**: 초기 로딩 번들 크기 최소화

#### 구현 계획

- [ ] Vite 번들 분석
- [ ] 동적 import로 코드 스플리팅
- [ ] Tree-shaking 최적화
- [ ] CSS 및 폰트 최적화

### 5단계: SEO 및 구조화 데이터

**목표**: 검색 엔진 최적화 및 사용자 경험 개선

#### 구현 계획

- [ ] Article schema.org 구조화 데이터
- [ ] BreadcrumbList schema 추가
- [ ] WebSite schema 추가
- [ ] 메타 태그 최적화

## 📈 성능 목표

### 현재 상태 (베이스라인)

- 포스트 수: 33개
- 메인 번들 크기: 28KB (gzipped: 10.72KB)
- 포스트 페이지 번들: 28KB (gzipped: 10.27KB)
- 전체 빌드 시간: ~3초
- **문제점**: 모든 포스트 데이터가 런타임에 로드됨

### 목표 성능

- 태그 클릭 첫 반응: < 100ms
- 초기 페이지 로드: < 2초 (3G 환경)
- 번들 크기: < 200KB (gzipped)
- Lighthouse 성능 점수: > 90점

## 🔄 구현 순서

1. **현재 성능 측정** - 베이스라인 설정
2. **메타데이터 추출 스크립트** - 핵심 성능 개선
3. **클라이언트 필터링** - 사용자 경험 개선
4. **지연 로딩** - 추가 최적화
5. **번들 최적화** - 전체적인 성능 향상
6. **SEO 최적화** - 마케팅 및 접근성

## 📝 진행 상황

### ✅ 완료

- 새 브랜치 생성 및 계획 수립

### 🚧 진행 중

- 현재 성능 베이스라인 측정

### ⏳ 예정

- 메타데이터 추출 스크립트 개발
- 클라이언트 사이드 필터링 구현

## 🧪 테스트 계획

### 성능 테스트

- Lighthouse 성능 감사
- WebPageTest 분석
- 실제 사용자 환경 테스트

### 기능 테스트

- 태그 필터링 정확성
- 페이지네이션 동작
- 반응형 디자인 호환성

### 브라우저 호환성

- Chrome, Firefox, Safari, Edge
- 모바일 브라우저 테스트

## 🚨 위험 요소 및 대응

### 위험 요소

1. **SEO 영향**: 클라이언트 사이드 라우팅으로 인한 SEO 저하
2. **브라우저 호환성**: 최신 API 사용 시 구형 브라우저 문제
3. **복잡성 증가**: 캐싱 로직으로 인한 코드 복잡성

### 대응 방안

1. **SSR 유지**: 중요한 SEO 페이지는 서버 사이드 렌더링 유지
2. **프로그레시브 인핸스먼트**: 기본 기능은 모든 브라우저에서 동작
3. **단계적 적용**: 점진적으로 기능을 추가하여 안정성 확보

---

**최종 업데이트**: 2025-07-07
**담당자**: Claude Code Assistant
**검토자**: nanggo
